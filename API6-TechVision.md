# Projeto 6: 2¬∫ Semestre de 2023

### Parceiro Acad√™mico

Visiona Espacial 

![Visiona](https://github.com/Borgarelli/Portfolio-Fatec/assets/79945984/5f9a61fb-c362-4d7f-b1c1-a208ffca88f2)

### *Visiona Espacial*

### Vis√£o do Projeto

<p style="text-align: justify;">
O projeto tem como objetivo a instaura√ß√£o de um Sistema de Informa√ß√£o Geogr√°fica (SIG) com o prop√≥sito de aprimorar a efic√°cia das an√°lises e otimizar os procedimentos internos. Embora os dados necess√°rios estejam acess√≠veis no ProAgro, um programa do governo federal voltado ao financiamento agr√≠cola para pequenos e m√©dios agricultores brasileiros, desafios significativos surgem devido √† falta de organiza√ß√£o, √† presen√ßa de informa√ß√µes sens√≠veis e √† sobrecarga de dados.

A ideia √© apresentar uma solu√ß√£o completa, envolvendo a coleta e o aprimoramento dos dados p√∫blicos do ProAgro, a eficiente reestrutura√ß√£o da base de dados e o desenvolvimento de um SIG personalizado. Esse sistema tem como intuito simplificar e organizar as informa√ß√µes, proporcionando aos usu√°rios uma compreens√£o mais acess√≠vel e facilitando a an√°lise dos dados. Destaca-se a organiza√ß√£o do banco de dados p√∫blico do ProAgro para possibilitar consultas e an√°lises r√°pidas no √¢mbito do Sistema de Informa√ß√µes Geogr√°ficas.</p>

[<img src ="https://github.com/Borgarelli/Portfolio-Fatec/assets/79945984/71e3cfd2-da41-4e5b-bd74-d5621fb1115e"
 width="250" height="250"/>](https://github.com/TechVisionn/tech-parent "Tech Vision Reposit√≥rio")

### *Tech Vision Parent*
Link do reposit√≥rio do projeto: https://github.com/TechVisionn/tech-parent

## Tecnologias Utilizadas üíª

### MongoDB  [![MongoDB](https://img.shields.io/badge/MongoDB-%234ea94b?style=for-the-badge&logo=mongodb)](https://docs.mongodb.com/)

<p style="text-align: justify;">
O MongoDB √© um banco de dados NoSQL de c√≥digo aberto, orientado a documentos, oferece flexibilidade e escalabilidade para armazenar e consultar dados, permitindo o uso de esquemas din√¢micos e utilizado em diversas aplica√ß√µes, para simplificar o desenvolvimento ao suportar modelos de dados variados.
</p>

Clique [aqui](https://docs.mongodb.com/), para acessar a documenta√ß√£o oficial.

### Pandas [![Pandas](https://img.shields.io/badge/Pandas-%23150458?style=for-the-badge&logo=pandas)](https://pandas.pydata.org/)

<p style="text-align: justify";>
O Pandas √© uma poderosa biblioteca de c√≥digo aberto para manipula√ß√£o e an√°lise de dados em Python, oferece estruturas de dados flex√≠veis, como DataFrames, para facilitar a limpeza, transforma√ß√£o e an√°lise eficiente de conjuntos de dados.
</p>

Clique [aqui](https://pandas.pydata.org), para acessar a documenta√ß√£o oficial.


### Flask [![Flask](https://img.shields.io/badge/Flask-%23000.svg?style=for-the-badge&logo=flask&logoColor=white)](http://flask.pocoo.org/)

<p style="text-align: justify;">
O Flask √© um framework leve em Python para constru√ß√£o de aplicativos web. O framework oferece diversas ferramentas para criar rapidamente aplica√ß√µes web simples a complexas, seguindo o padr√£o de arquitetura MVC (Model-View-Controller). 
<p>

Clique [aqui](https://flask.palletsprojects.com/en/2.3.x/), para acessar a documenta√ß√£o oficial.


### SQL-Alchemy [![SQL-Alchemy](https://img.shields.io/badge/SQL--Alchemy-%230D6A8F.svg?style=for-the-badge&logo=sqlalchemy&logoColor=white)](https://www.sqlalchemy.org/)

<p style="text-align: justify;">
O SQL-Alchemy √© uma biblioteca em Python que fornece uma abstra√ß√£o flex√≠vel para trabalhar com bancos de dados relacionais. E permite que os desenvolvedores criem consultas SQL de maneira program√°tica, mapeiem objetos Python para tabelas do banco de dados e gerenciem intera√ß√µes complexas com o banco de dados de forma eficiente.
</p>

Clique [aqui](https://docs.sqlalchemy.org/), para acessar a documenta√ß√£o oficial.

### React [![React](https://img.shields.io/badge/React-%2320232a?style=for-the-badge&logo=react)](https://reactjs.org/)
<p style="text-align: justify;">
O React √© uma biblioteca JavaScript para constru√ß√£o de interfaces de usu√°rio, desenvolvida pelo Facebook. E utiliza uma abordagem de programa√ß√£o declarativa, facilitando a cria√ß√£o de componentes reutiliz√°veis que atualizam automaticamente conforme os dados mudam, proporcionando uma experi√™ncia eficiente e responsiva para o desenvolvimento de aplica√ß√µes web interativas.
</p>

Clique [aqui](https://reactjs.org), para acessar a documenta√ß√£o oficial.

### Microsoft-Azure [![Azure](https://img.shields.io/badge/Microsoft_Azure-%230078D4?style=for-the-badge&logo=microsoft-azure)](https://docs.microsoft.com/azure/)
<p style="text-align: justify;">
O Microsoft Azure √© uma plataforma de computa√ß√£o em nuvem l√≠der que oferece uma ampla gama de servi√ßos, desde hospedagem de m√°quinas virtuais at√© intelig√™ncia artificial. E fornece solu√ß√µes escal√°veis para desenvolvimento, implanta√ß√£o e gerenciamento de aplicativos, al√©m de suportar diversas linguagens de programa√ß√£o. Com recursos como armazenamento, an√°lise de dados e aprendizado de m√°quina, o Azure √© uma escolha popular para empresas modernas na nuvem.
</p>

Clique [aqui](https://docs.microsoft.com/azure/), para acessar a documenta√ß√£o oficial.

### PostgreSQL [![PostgreSQL](https://img.shields.io/badge/PostgreSQL-316192?style=for-the-badge&logo=postgresql&logoColor=white)](https://www.postgresql.org/)
<p style="text-align: justify;">
O PostgreSQL √© um banco de dados objeto-relacional (sem rela√ß√£o com linguagens de programa√ß√£o orientadas a objetos), em que cada coisa criada √© tratada como um objeto, tais como bancos de dados, tabelas, views, triggers, etc.
</p>

Clique [aqui](https://www.postgresql.org/about/) para acessar a documenta√ß√£o oficial.


##  Contribui√ß√µes Pessoais ‚úî
<p style="text-align: justify;">
Neste projeto, desempenhei um papel fundamental na gest√£o e tratamento de dados. Utilizando a biblioteca Pandas, realizei a leitura e convers√£o dos dados em formato CSV fornecidos pela Visiona. Para essa primeira intera√ß√£o com os CSVs, desenvolvi um script essencial para a convers√£o e limpeza dos dados, visando facilitar a posterior visualiza√ß√£o e an√°lise.

<details><summary>Script para leitura dos CSV</summary>

```kotlin
import pandas as pd
import os
import chardet

def detectar_codificacao(arquivo_csv):
    with open(arquivo_csv, 'rb') as f:
        result = chardet.detect(f.read())
        return result['encoding']

def identificar_separador_csv(arquivo_csv):
    with open(arquivo_csv, 'r', newline='') as file:
        conteudo = file.read(1024)  # Leia apenas os primeiros 1024 bytes

        # Tente identificar o separador com base em algumas pistas
        if ',' in conteudo:
            return ','
        elif ';' in conteudo:
            return ';'
        elif '\t' in conteudo:
            return '\t'
        else:
            return None  # Se n√£o encontrar um separador conhecido, retorne None

def ler_csv_e_preencher_nulos(arquivo_csv):
    codificacao = detectar_codificacao(arquivo_csv)
    sep = identificar_separador_csv(arquivo_csv)

    if sep is None:
        print("N√£o foi poss√≠vel identificar automaticamente o separador.")
        return

    try:
        # Tentar ler com o separador identificado
        df = pd.read_csv(arquivo_csv, encoding=codificacao, sep=sep, quotechar='"', quoting=3, on_bad_lines='skip', na_values=['NaN', 'N/A', 'NA', 'nan', 'n/a'])

        if not df.empty:
            # Remover as aspas duplas dos valores na coluna "VL_VERTICES"
            df['VL_VERTICES'] = df['VL_VERTICES'].str.strip('"')

            NU_IDENTIFICADOR = df['NU_IDENTIFICADOR']
            print(NU_IDENTIFICADOR)
        else:
            print("Arquivo CSV vazio.")
    except UnicodeDecodeError:
        print(f"Tentando com codifica√ß√£o {codificacao}... N√£o foi poss√≠vel decodificar.")
    except pd.errors.ParserError:
        print(f"N√£o foi poss√≠vel analisar o arquivo CSV com o separador '{sep}'.")

def main():
    os.system('cls')
    arquivo_csv = r"C:\Users\borga\Documents\aula_massanori\resultado_novo2 - Copia.csv"
    ler_csv_e_preencher_nulos(arquivo_csv)

if __name__ == "__main__":
    main()
```
</details>
</br>

Ap√≥s a bem-sucedida leitura dos dados, surgiu a necessidade de armazen√°-los de forma segura na nuvem. Para alcan√ßar esse objetivo, concentrei meus esfor√ßos na configura√ß√£o de um pipeline na plataforma Microsoft Azure, que se revelou a ferramenta ideal para a gest√£o desses dados. O pipeline, de funcionamento intuitivo, inicialmente carrega o CSV para a Azure e, em seguida, cria um Data Definition Language (DDL) contendo as informa√ß√µes do CSV no Sistema de Gerenciamento de Banco de Dados (SGBD). Para essa etapa, contei com a efici√™ncia do WorkBench. Posteriormente, o pipeline realiza a vincula√ß√£o da tabela na nuvem com seu respectivo CSV, estabelecendo uma infraestrutura que assegura o acesso restrito e seguro aos dados.

<details><summary>Microsoft Azure Factory</summary>

 > Esse √© o Microsft Azure Factory, aqui √© realizado todo o processo da pipeline, que envolve desde armazenar o csv, criar a inst√¢ncia em Workbench-Azure e √© mapeado todos os dados de seus respectivos CSV

<img src="https://github.com/Borgarelli/Portfolio-Fatec/assets/79945984/06ae6679-65e9-4d95-a09e-f8f3b08bc426">

</details>
</br>

Realizado o armazenamento dos dados de maneira eficaz, foi necess√°rio realizar uma procedure para facilitar para o controle financeiro de todos os csv para facilitar em no calculo financeiro de cada gleba dentro do SGBD

<details><summary>Procedure</summary>

```kotlin
BEGIN
select 
	
    S5.VL_ALIQ_PROAGRO as Aliquota,
    S5.VL_JUROS as Juros,
	S5.VL_PRESTACAO_INVESTIMENTO as Prestacao,
    S5.VL_PREV_PROD as Previsao_Produto,
    S5.VL_QUANTIDADE as Quantidade, 
	S5.VL_RECEITA_BRUTA_ESPERADA as Receita_Bruta,
    S5.VL_PARC_CREDITO as Parcelado_Credito,
    S5.VL_REC_PROPRIO as Recebido_Proprio,
    S5.VL_PERC_RISCO_STN as Percentual_Risco,
    S5.VL_PERC_RISCO_FUNDO_CONST as Percentual_Fundo,
    S5.VL_REC_PROPRIO_SRV as Proprio_Srv,
    S5.VL_AREA_FINANC as Area_Financia,
    SD.VL_MEDIO_DIARIO_VINCENDO as Medio_Diario,
    SD.VL_ULTIMO_DIA as Ultimo_Dia,
    SD.VL_MEDIO_DIARIO as Media_Diaria,
    SL.LIR_VL_LIBERADO as Valor_Liberado,
    SJ.VL_RECEITAS_CONSIDERADAS as Receitas_Consideras,
    SJ.VL_COBERTURA_ANT_REC_PROPRIOS as Cobertura_Proprios,
    SJ.VL_DEMAIS_DESPESAS_COMPROV_PERD as Despesas,
    SJ.VL_CRED_CUSTEIO_USADO as Credito_Custeio,
    SJ.VL_DEMAIS_DESP_ANT_COMP_PER as Demais_Despesas,
    SJ.VL_REC_PROP_USADO as Proprio_Usado,
    SJ.VL_COB_ANT_GARANTIA_RENDA_MIN as Renda_Minima,
    SJ.VL_PERDAS_NAO_AMPARADAS as Nao_Amaparadas,
    SJ.VL_ENCARGOS_SOB_CREDITO as Encargos_Credito,
    SJ.VL_PERC_REDUTOR_COBERTURA as Redutor_Cobertura,
    SJ.VL_REMU_ANT_ENCARG_COMP_PERDAS as Remuneracao,
    SJ.VL_COBERTURA_ANT_CREDITO_CUSTEIO as Cobertura_Credito,
    SP.vl_atual as Valor_Atual,
    SP.vl_base as Valor_Base,
    SP.vl_pago as Valor_Pago,
    SP.vl_imposto as Valor_Imposto
    
    
from 
	techdata.saida5 S5 
    LEFT JOIN techvision.sicor_saldos SD on SD.REF_BACEN = S5.REF_BACEN
    LEFT JOIN techvision.sicor_liberacao_recursos SL on SL.REF_BACEN = S5.REF_BACEN
    LEFT JOIN techvision.sumula_julgamento SJ on SJ.REF_BACEN = S5.REF_BACEN
    LEFT JOIN techvision.sicor_parcelas_proagro SP on SP.REF_BACEN = S5.REF_BACEN
limit 10;
END
```
</details>
</br>

E por fim, a modelagem relacional de como est√° sendo realizado a colheita das tabelas para a forma√ß√£o das glebas e retornar na aplica√ß√£o
<details><summary>Glebas</summary>

>Modelo relacional do retorno das tabelas respons√°veis por compor as glebas
<img src="https://github.com/Borgarelli/Portfolio-Fatec/assets/79945984/cafd106f-6f20-4661-b45f-519ff20e98c0">

O modelo foi gerado com base nessa query
```kotlin
     def generete_query_to_pdf(self, ref_bacen):
         query = text("""
                 SELECT
                     GlebaInfo.Numero_RefBacen,
                     GlebaInfo.Numero_Ordem,
                     GlebaInfo.Cod_Identificador_Gleba,
                     GlebaInfo.Numero_Gleba,
                     GlebaInfo.Altitute,
                     GlebaInfo.NU_INDICE_PONTO,
                     GlebaInfo.Coordenas,
                     S5.DT_EMISSAO AS DATA_EMISSAO_REFBACEN,
                     CASE 
                         WHEN S5.CD_ESTADO = 'SP' THEN 'S√£o Paulo'
                         ELSE S5.CD_ESTADO 
                     END AS ESTADO,
                     S5.CD_TIPO_SEGURO AS TIPO_SEGURO,
                     S5.DT_FIM_PLANTIO AS DATA_PLANTIO,
                     S5.CD_TIPO_IRRIGACAO AS TIPO_IRRIGACAO,
                     S5.VL_ALIQ_PROAGRO AS VALOR_ALIQUOTA,
                     S5.CD_TIPO_CULTIVO AS TIPO_CULTIVO,
                     S5.CD_TIPO_GRAO_SEMENTE AS TIPO_GRAO,
                     S5.VL_JUROS AS JUROS_INVESTIMENTO,
                     S5.VL_RECEITA_BRUTA_ESPERADA AS RECEITA_BRUTA_ESTIMADA,
                     S5.DT_FIM_COLHEITA AS DATA_FIM_COLHEITA,
                     S5.VL_PERC_CUSTO_EFET_TOTAL AS CUSTO_TOTAL
                 FROM
                 (SELECT 
                     MAX(REF_BACEN) AS Numero_RefBacen, 
                     MAX(NU_ORDEM) AS Numero_Ordem, 
                     MAX(NU_IDENTIFICADOR) AS Cod_Identificador_Gleba, 
                     MAX(NU_INDICE_GLEBA) AS Numero_Gleba,
                     MAX(CGL_VL_ALTITUDE) AS Altitute,
                     MAX(NU_INDICE_PONTO) AS NU_INDICE_PONTO,
                     CONCAT('MULTIPOINT(', GROUP_CONCAT(CONCAT(REPLACE(VL_LATITUDE, ',', '.'), ' ', REPLACE(VL_LONGITUDE, ',', '.')) SEPARATOR ', '), ')') AS Coordenas
                 FROM glebas_sp
                 WHERE REF_BACEN = :ref_bacen) AS GlebaInfo
                 JOIN saida5 S5 ON S5.REF_BACEN = :ref_bacen limit 1;""")
```
</details>
</p>



## Aprendizados Efetivos ![Aprendizados efetivos](https://img.shields.io/badge/Aprendizados%20efetivos-100%25-brightgreen?style=for-the-badge)

Essa experi√™ncia foi enriquecedora, proporcionando aprendizados pr√°ticos e efetivos. A gest√£o de dados com Pandas ampliou minha habilidade na manipula√ß√£o eficiente de conjuntos de dados complexos, enquanto a configura√ß√£o de pipelines na Microsoft Azure consolidou meu entendimento sobre a import√¢ncia da seguran√ßa e organiza√ß√£o na armazenagem de dados na nuvem.

A integra√ß√£o de ferramentas como o WorkBench para a cria√ß√£o de inst√¢ncias no formato WorkBench_Azure revelou-se uma pr√°tica valiosa, demonstrando a sinergia entre diferentes tecnologias para alcan√ßar objetivos espec√≠ficos. Essa jornada contribuiu significativamente para o aprimoramento das minhas compet√™ncias em ci√™ncia de dados e gest√£o de infraestrutura na nuvem.

- Estrutura√ß√£o do banco de dados: Sei Fazer com Autonomia.
- Utiliza√ß√£o da plataforma Azure Cloud: Sei Fazer com Autonomia.
- Utiliza√ß√£o da biblioteca pandas para gest√£o dos arquivos csv: Sei Fazer com Autonomia. 

## Navega√ß√£o Entre Projetos :link:
 
<p align="justify" style="font-family:roboto;"><li><a href="https://github.com/Borgarelli/Portfolio-Fatec/blob/main/Julius.md"> 1¬∫ Semestre: Julius - Assistente virtual criado para facilitar a sua vida financeira</a></li></p>
<p align="justify" style="font-family:roboto;"><li><a href="https://github.com/Borgarelli/Portfolio-Fatec/blob/main/SGBD_Health.md"> 2¬∫ Semestre: SGBD Health - Aplica√ß√£o de monitoramento de SGBD com foco em performance e desempenho</a></li></p>
<p align="justify" style="font-family:roboto;"><li><a href="https://github.com/Borgarelli/Portfolio-Fatec/blob/main/Descont0n.md"> 3¬∞ Semestre: Descont0n - Ferramenta para cria√ß√£o de promo√ß√µes e regras de neg√≥cio de E-commerce</a></li></p>
<p align="justify" style="font-family:roboto;"><li><a href="https://github.com/Borgarelli/Portfolio-Fatec/blob/main/MCS.md"> 4¬∞ Semestre: MCS - Sistema ERP que visa fazer a gest√£o dos dados fornecidos pelo usu√°rio</a></li></p>
<p align="justify" style="font-family:roboto;"><li><a href="https://github.com/Borgarelli/Portfolio-Fatec/blob/main/TechNinjas.md">5¬∞ Semestre: Tech Ninjas - Sistema de automatiza√ß√£o para fluxo de gest√£o dos arquivos armazenados em cloud</a></li></p>
<p align="justify" style="font-family:roboto;"><li>6¬∫ Semestre: TechVision - Sistema de classifica√ß√£o e identifica√ß√£o geogr√°fica de glebas</li>
<p align="justify" style="font-family:roboto;"><li><a href="https://github.com/Borgarelli/Portfolio-Fatec/blob/main/README.md"> Voltar para p√°gina inicial</a></li></p>
